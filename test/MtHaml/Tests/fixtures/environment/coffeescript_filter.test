--FILE--
<?php
$filter = new MtHaml\Filter\CoffeeScript(new CoffeeScript\Compiler);
$env = new MtHaml\Environment('twig', array('enable_escaper' => false), array('coffee' => $filter));
echo $env->compileString($parts['HAML'], "$file.haml");

--SKIPIF--
<?php
PHP_MAJOR_VERSION >= 7 && print("skip");

--HAML--
:coffee
 square = (x) -> x * x
:coffee
 number = #{number}
 square = (x) -> x * x
--EXPECT--
<script type="text/javascript">
//<![CDATA[
// Generated by CoffeeScript PHP 1.3.1
(function() {
  var square;

  square = function(x) {
    return x * x;
  };

}).call(this);

//]]
</script>
{% filter mthaml_coffee %}number = {% line 4 %}{{ number }}
square = (x) -> x * x
{% endfilter %}

